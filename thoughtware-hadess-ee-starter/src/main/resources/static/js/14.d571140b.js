(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{927:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return x}));n(422);var a=n(417),r=(n(397),n(398)),l=(n(399),n(400)),i=(n(462),n(459)),o=(n(413),n(414)),c=(n(186),n(59)),s=n(0),u=n.n(s),m=n(6),f=n(82),d=n(956),p=n(183),v=n(392),E=n.p+"images/licence-features.svg",h=n(393),y=n.n(h);function g(){return(g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function b(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l,i,o=[],c=!0,s=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=l.call(n)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw r}}return o}}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var S=function(e){var t=e.bgroup,n=e.children,h=w(Object(s.useState)(null),2),N=h[0],O=h[1],S=w(Object(s.useState)(null),2),j=S[0],A=S[1],k=w(Object(s.useState)([]),2),x=k[0],Y=k[1],C=w(Object(s.useState)({}),2),_=C[0],I=C[1],T=w(Object(s.useState)(!1),2),M=T[0],D=T[1],F=w(Object(s.useState)(!1),2),H=F[0],L=F[1],P=w(Object(s.useState)(!0),2),J=P[0],U=P[1],R=window.location.origin;Object(s.useEffect)((function(){V()}),[]);var V=function(){m.Axios.post("/version/getVersion").then((function(e){0===e.code&&(I(e.data),localStorage.setItem(m.LOCALSTORAGE_KEY.VERSION_INFO,JSON.stringify(e.data)),e.data.expired||(G(),K())),U(!1)}))},G=function(){m.Axios.post("/licence/findUseLicence").then((function(e){0===e.code&&e.data&&A(e.data),6e3===e.code&&c.default.error(e.msg)}))},K=function(){m.Axios.post("/licence/findAllLicence").then((function(e){0===e.code&&O(e.data)}))},$={name:"file",action:R+("/"===R.substring(R.length-1,R.length)?"licence/import":"/licence/import"),onChange:function(e){var t=b(e.fileList);if(t=(t=t.slice(-1)).map((function(e){return e.response&&(e.url=e.response.url),e})),Y(t),"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status){var n=e.file;return 0===n.response.code?(setTimeout((function(){Y([]),V(),findProductAuthUserAll()}),1e3),c.default.success("licence导入成功")):c.default.error("licence导入失败：".concat(n.response.msg))}if("error"===e.file.status)return c.default.error("licence导入失败，请重新上传")}};return u.a.createElement(a.a,{spinning:J,tip:"加载中..."},u.a.createElement(r.default,{className:"thoughtware_version"},u.a.createElement(l.default,{sm:{span:24},xs:{span:24},md:{span:24},lg:{span:"16",offset:"4"},xl:{span:"14",offset:"5"},className:"thoughtware_version_container"},u.a.createElement(d.a,{firstItem:"版本与许可证"},u.a.createElement("div",{className:"thoughtware_version_up_btn"},2===(null==_?void 0:_.release)&&u.a.createElement(u.a.Fragment,null,u.a.createElement(i.a,g({},$,{fileList:x}),u.a.createElement(p.a,{isMar:!_.expired,type:"primary"},"导入licence")),!_.expired&&u.a.createElement(u.a.Fragment,null,u.a.createElement(p.a,{onClick:function(){return L(!0)}},"历史"),u.a.createElement(v.a,{visible:H,footer:null,onCancel:function(){return L(!1)},destroyOnClose:!0,width:800,title:u.a.createElement("div",{className:"info-item-title-te-modal-title"},u.a.createElement("div",null,"更多详情"),u.a.createElement("div",{onClick:function(){return L(!1)}},u.a.createElement(f.default,null)))},u.a.createElement("div",{className:"info-item-title-te-modal-info info-item-title-te-modal"},u.a.createElement("div",{className:"te-modal-info-item"},u.a.createElement("div",null,"生效时间"),u.a.createElement("div",null,"过期时间"),u.a.createElement("div",null,"用户数"),u.a.createElement("div",null,"状态")),N&&N.length>0?N.map((function(e,t){return u.a.createElement("div",{key:t,className:"te-modal-info-item"},u.a.createElement("div",null,y()(e.expiryTime).format("YYYY-MM-DD HH:mm:ss")),u.a.createElement("div",null,y()(e.issuedTime).format("YYYY-MM-DD HH:mm:ss")),u.a.createElement("div",null,e.userNum>0?e.userNum:"无限制"),u.a.createElement("div",null,1===e.state&&"已失效",2===e.state&&u.a.createElement("span",{className:"te-modal-info-item-blue"},"生效中"),3===e.state&&"未生效"))})):u.a.createElement("div",{className:"te-modal-info-item-empty"},"暂无历史"))))))),u.a.createElement("div",{className:"thoughtware_version-info"},u.a.createElement("div",{className:"thoughtware_version-info-item"},u.a.createElement("span",{className:"info-item-title"},"应用名称"),m.productTitle[t]),u.a.createElement("div",{className:"thoughtware_version-info-item"},u.a.createElement("div",{className:"info-item-title"},"版本类型"),1===(null==_?void 0:_.release)?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"info-item-info"},"社区版",u.a.createElement("span",{className:"info-item-title-te",onClick:function(){return D(!0)}},u.a.createElement("img",{src:E,alt:"企业版特性",height:14,width:14}))),u.a.createElement("div",{onClick:function(){var e=1===_.release?"ce":"ee";window.open("http:///thoughtware.cn/product/detail?code=".concat(t,"&type=").concat(e))},className:"info-item-action"},"升级"),u.a.createElement(v.a,{visible:M,footer:null,onCancel:function(){return D(!1)},destroyOnClose:!0,width:800,title:u.a.createElement("div",{className:"info-item-title-te-modal-title"},u.a.createElement("div",null,"企业版特性"),u.a.createElement("div",{onClick:function(){return D(!1)}},u.a.createElement(f.default,null)))},u.a.createElement("div",{className:"info-item-title-te-modal"},n))):_.expired?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"info-item-info"},"企业版"),u.a.createElement("div",{className:"info-item-action",onClick:function(){window.open("http://thoughtware.cn/account/subscribe/info/".concat(t))}},"免费试用"),u.a.createElement("div",{className:"info-item-action",onClick:function(){window.open("http://thoughtware.cn/account/subscribe")}},"订阅")):u.a.createElement(u.a.Fragment,null,"企业版",u.a.createElement("div",{className:"info-item-action"},_.expired?null!=j&&j.tryApply?u.a.createElement(o.default,{color:"#ff4d4f"},"试用已过期"):u.a.createElement(o.default,{color:"#ff4d4f"},"订阅已过期"):null!=j&&j.tryApply?u.a.createElement(o.default,{color:"#5d70ea"},"试用中"):u.a.createElement(o.default,{color:"#5d70ea"},"订阅中")))),u.a.createElement("div",{className:"thoughtware_version-info-item"},u.a.createElement("span",{className:"info-item-title"},"用户数"),1===_.release||_.expired?"不限制":(null==j?void 0:j.userNum)>0?j.userNum+"人":"无限制"),u.a.createElement("div",{className:"thoughtware_version-info-item"},u.a.createElement("span",{className:"info-item-title"},"生效时间"),null!=j&&j.expiryTime?y()(null==j?void 0:j.expiryTime).format("YYYY-MM-DD HH:mm:ss"):"--"),u.a.createElement("div",{className:"thoughtware_version-info-item"},u.a.createElement("span",{className:"info-item-title"},"过期时间"),null!=j&&j.issuedTime?y()(null==j?void 0:j.issuedTime).format("YYYY-MM-DD HH:mm:ss"):"--")))))},j=(n(395),n(394)),A=n(228);function k(){return(k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var x=function(e){var t=function(e){return e?u.a.createElement(A.a,{style:{color:"#0063FF"}}):u.a.createElement(f.default,{style:{color:"#ff0000"}})},n=[{title:"功能",dataIndex:"title",key:"title",colSpan:2,render:function(e,t,n){var a={children:e,props:{}};return 0===n&&(a.props.rowSpan=3),n>0&&n<3&&(a.props.rowSpan=0),3===n&&(a.props.rowSpan=2),n>3&&(a.props.rowSpan=0),a}},{title:"功能",dataIndex:"feature",key:"feature",colSpan:0},{title:"社区版",dataIndex:"ce",key:"ce",render:function(e){return t(e)}},{title:"企业版",dataIndex:"ee",key:"ee",render:function(e){return t(e)}}];return u.a.createElement(S,k({},e,{bgroup:"hadess"}),u.a.createElement(j.default,{bordered:!0,columns:n,dataSource:[{key:"1",title:"基本功能",feature:"LDAP",ce:!1,ee:!0},{key:"2",title:"基本功能",feature:"在线客服",ce:!1,ee:!0},{key:"3",title:"基本功能",feature:"用户和部门",ce:!0,ee:!0},{key:"4",title:"升级功能",feature:"插件",ce:!1,ee:!0},{key:"5",title:"升级功能",feature:"权限",ce:!0,ee:!0}],pagination:!1}))}}}]);