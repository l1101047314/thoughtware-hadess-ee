(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{923:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Y}));n(423);var a=n(417),r=(n(399),n(400)),l=(n(401),n(402)),i=(n(461),n(458)),o=(n(415),n(416)),c=(n(186),n(67)),s=n(0),u=n.n(s),m=n(8),f=n(82),d=n(950),p=n(184),v=n(394),E=n(92),h=n.p+"images/licence-features.svg",y=n(395),g=n.n(y);function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function w(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l,i,o=[],c=!0,s=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=l.call(n)).done)&&(o.push(a.value),o.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw r}}return o}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var j=function(e){var t=e.bgroup,n=void 0===t?"darth":t,y=e.children,O=N(Object(s.useState)(null),2),S=O[0],j=O[1],A=N(Object(s.useState)(null),2),k=A[0],x=A[1],Y=N(Object(s.useState)([]),2),C=Y[0],_=Y[1],I=N(Object(s.useState)({}),2),M=I[0],T=I[1],D=N(Object(s.useState)(!1),2),F=D[0],H=D[1],L=N(Object(s.useState)(!1),2),P=L[0],J=L[1],U=N(Object(s.useState)(!0),2),R=U[0],V=U[1],G=window.location.origin;Object(s.useEffect)((function(){K()}),[]);var K=function(){m.Axios.post("/version/getVersion").then((function(e){0===e.code&&(T(e.data),localStorage.setItem(m.LOCALSTORAGE_KEY.VERSION_INFO,JSON.stringify(e.data)),e.data.expired||($(),q())),V(!1)}))},$=function(){m.Axios.post("/licence/findUseLicence").then((function(e){0===e.code&&e.data&&x(e.data),6e3===e.code&&c.default.error(e.msg)}))},q=function(){m.Axios.post("/licence/findAllLicence").then((function(e){0===e.code&&j(e.data)}))},z={name:"file",action:G+("/"===G.substring(G.length-1,G.length)?"licence/import":"/licence/import"),onChange:function(e){var t=w(e.fileList);if(t=(t=t.slice(-1)).map((function(e){return e.response&&(e.url=e.response.url),e})),_(t),"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status){var n=e.file;return 0===n.response.code?(setTimeout((function(){_([]),K(),findProductAuthUserAll()}),1e3),c.default.success("licence导入成功")):c.default.error("licence导入失败：".concat(n.response.msg))}if("error"===e.file.status)return c.default.error("licence导入失败，请重新上传")}};return u.a.createElement(a.a,{spinning:R,tip:"加载中..."},u.a.createElement(r.default,{className:"thoughtware_version"},u.a.createElement(l.default,{sm:{span:24},xs:{span:24},md:{span:24},lg:{span:"16",offset:"4"},xl:{span:"14",offset:"5"}},u.a.createElement("div",{className:"thoughtware_version_container"},u.a.createElement(d.a,{firstItem:"版本与许可证"},u.a.createElement("div",{className:"thoughtware_version_up_btn"},2===(null==M?void 0:M.release)&&u.a.createElement(u.a.Fragment,null,u.a.createElement(i.a,b({},z,{fileList:C}),u.a.createElement(p.a,{isMar:!M.expired,type:"primary"},"导入licence")),!M.expired&&u.a.createElement(u.a.Fragment,null,u.a.createElement(p.a,{onClick:function(){return J(!0)}},"历史"),u.a.createElement(v.a,{visible:P,footer:null,onCancel:function(){return J(!1)},destroyOnClose:!0,width:800,title:u.a.createElement("div",{className:"info-item-title-te-modal-title"},u.a.createElement("div",null,"更多详情"),u.a.createElement("div",{onClick:function(){return J(!1)}},u.a.createElement(f.default,null)))},u.a.createElement("div",{className:"info-item-title-te-modal-info info-item-title-te-modal"},u.a.createElement("div",{className:"te-modal-info-item"},u.a.createElement("div",null,"生效时间"),u.a.createElement("div",null,"过期时间"),u.a.createElement("div",null,"用户数"),u.a.createElement("div",null,"状态")),S&&S.length>0?S.map((function(e,t){return u.a.createElement("div",{key:t,className:"te-modal-info-item"},u.a.createElement("div",null,g()(e.expiryTime).format("YYYY-MM-DD HH:mm:ss")),u.a.createElement("div",null,g()(e.issuedTime).format("YYYY-MM-DD HH:mm:ss")),u.a.createElement("div",null,e.userNum>0?e.userNum:"无限制"),u.a.createElement("div",null,1===e.state&&"已失效",2===e.state&&u.a.createElement("span",{className:"te-modal-info-item-blue"},"生效中"),3===e.state&&"未生效"))})):u.a.createElement("div",{className:"te-modal-info-item-empty"},"暂无历史"))))))),u.a.createElement("div",{className:"thoughtware_version-info"},u.a.createElement("div",{className:"thoughtware_version-info-item"},u.a.createElement("span",{className:"info-item-title"},"应用名称"),E.b[n]),u.a.createElement("div",{className:"thoughtware_version-info-item"},u.a.createElement("div",{className:"info-item-title"},"版本类型"),1===(null==M?void 0:M.release)?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"info-item-info"},"社区版",u.a.createElement("span",{className:"info-item-title-te",onClick:function(){return H(!0)}},u.a.createElement("img",{src:h,alt:"企业版特性",height:14,width:14}))),u.a.createElement("div",{onClick:function(){var e=1===M.release?"ce":"ee";window.open("http:///thoughtware.cn/product/detail?code=".concat(n,"&type=").concat(e))},className:"info-item-action"},"升级"),u.a.createElement(v.a,{visible:F,footer:null,onCancel:function(){return H(!1)},destroyOnClose:!0,width:800,title:u.a.createElement("div",{className:"info-item-title-te-modal-title"},u.a.createElement("div",null,"企业版特性"),u.a.createElement("div",{onClick:function(){return H(!1)}},u.a.createElement(f.default,null)))},u.a.createElement("div",{className:"info-item-title-te-modal"},y))):M.expired?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"info-item-info"},"企业版"),u.a.createElement("div",{className:"info-item-action",onClick:function(){window.open("http://thoughtware.cn/account/subscribe/info/".concat(n))}},"免费试用"),u.a.createElement("div",{className:"info-item-action",onClick:function(){window.open("http://thoughtware.cn/account/subscribe")}},"订阅")):u.a.createElement(u.a.Fragment,null,"企业版",u.a.createElement("div",{className:"info-item-action"},M.expired?null!=k&&k.tryApply?u.a.createElement(o.default,{color:"#ff4d4f"},"试用已过期"):u.a.createElement(o.default,{color:"#ff4d4f"},"订阅已过期"):null!=k&&k.tryApply?u.a.createElement(o.default,{color:"#5d70ea"},"试用中"):u.a.createElement(o.default,{color:"#5d70ea"},"订阅中")))),u.a.createElement("div",{className:"thoughtware_version-info-item"},u.a.createElement("span",{className:"info-item-title"},"用户数"),1===M.release||M.expired?"不限制":(null==k?void 0:k.userNum)>0?k.userNum+"人":"无限制"),u.a.createElement("div",{className:"thoughtware_version-info-item"},u.a.createElement("span",{className:"info-item-title"},"生效时间"),null!=k&&k.expiryTime?g()(null==k?void 0:k.expiryTime).format("YYYY-MM-DD HH:mm:ss"):"--"),u.a.createElement("div",{className:"thoughtware_version-info-item"},u.a.createElement("span",{className:"info-item-title"},"过期时间"),null!=k&&k.issuedTime?g()(null==k?void 0:k.issuedTime).format("YYYY-MM-DD HH:mm:ss"):"--"))))))},A=(n(397),n(396)),k=n(228);function x(){return(x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Y=function(e){var t=function(e){return e?u.a.createElement(k.a,{style:{color:"#0063FF"}}):u.a.createElement(f.default,{style:{color:"#ff0000"}})},n=[{title:"功能",dataIndex:"title",key:"title",colSpan:2,render:function(e,t,n){var a={children:e,props:{}};return 0===n&&(a.props.rowSpan=3),n>0&&n<3&&(a.props.rowSpan=0),3===n&&(a.props.rowSpan=2),n>3&&(a.props.rowSpan=0),a}},{title:"功能",dataIndex:"feature",key:"feature",colSpan:0},{title:"社区版",dataIndex:"ce",key:"ce",render:function(e){return t(e)}},{title:"企业版",dataIndex:"ee",key:"ee",render:function(e){return t(e)}}];return u.a.createElement(j,x({},e,{bgroup:"hadess"}),u.a.createElement(A.default,{bordered:!0,columns:n,dataSource:[{key:"1",title:"基本功能",feature:"LDAP",ce:!1,ee:!0},{key:"2",title:"基本功能",feature:"在线客服",ce:!1,ee:!0},{key:"3",title:"基本功能",feature:"用户和部门",ce:!0,ee:!0},{key:"4",title:"升级功能",feature:"插件",ce:!1,ee:!0},{key:"5",title:"升级功能",feature:"权限",ce:!0,ee:!0}],pagination:!1}))}}}]);