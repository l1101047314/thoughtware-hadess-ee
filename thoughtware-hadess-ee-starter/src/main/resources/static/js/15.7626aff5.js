(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{906:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return A}));a(416);var n=a(409),r=(a(394),a(395)),l=(a(399),a(400)),i=(a(455),a(453)),o=(a(189),a(67)),c=a(0),s=a.n(c),m=a(9),u=a(74),f=a(930),d=a(185),p=a(387),v=a(91),E=a(388),h=a.n(E);function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function b(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,i,o=[],c=!0,s=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=l.call(a)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(s)throw r}}return o}}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var O=function(e){var t=e.bgroup,a=void 0===t?"darth":t,E=e.children,N=g(Object(c.useState)(null),2),w=N[0],O=N[1],S=g(Object(c.useState)(null),2),j=S[0],k=S[1],A=g(Object(c.useState)([]),2),_=A[0],x=A[1],Y=g(Object(c.useState)({}),2),C=Y[0],I=Y[1],D=g(Object(c.useState)(!1),2),M=D[0],T=D[1],F=g(Object(c.useState)(!1),2),H=F[0],L=F[1],P=g(Object(c.useState)(!1),2),J=P[0],U=(P[1],window.location.origin);Object(c.useEffect)((function(){R()}),[]);var R=function(){m.Axios.post("/version/getVersion").then((function(e){0===e.code&&(I(e.data),localStorage.setItem(m.LOCALSTORAGE_KEY.VERSION_INFO,JSON.stringify(e.data)),e.data.expired||(V(),G()))}))},V=function(){m.Axios.post("/licence/findUseLicence").then((function(e){0===e.code&&e.data&&k(e.data),6e3===e.code&&o.default.error(e.msg)}))},G=function(){m.Axios.post("/licence/findAllLicence").then((function(e){0===e.code&&O(e.data)}))},K={name:"file",action:U+("/"===U.substring(U.length-1,U.length)?"licence/import":"/licence/import"),onChange:function(e){var t=b(e.fileList);if(t=(t=t.slice(-1)).map((function(e){return e.response&&(e.url=e.response.url),e})),x(t),"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status){var a=e.file;return 0===a.response.code?(setTimeout((function(){x([]),R(),findProductAuthUserAll()}),1e3),o.default.success("licence导入成功")):o.default.error("licence导入失败：".concat(a.response.msg))}if("error"===e.file.status)return o.default.error("licence导入失败，请重新上传")}},$=function(){var e=1===C.release?"ce":"ee";window.open("http:///thoughtware.net/download/product/productDetail?code=".concat(a,"&type=").concat(e))},q=function(){window.open("http://thoughtware.net/account/subscribe/info/".concat(a))},z=function(){window.open("http://thoughtware.net/account/subscribe")},B=function(){return C.expired?null!=j&&j.tryApply?s.a.createElement("span",{className:"state-red"},"试用已过期"):s.a.createElement("span",{className:"state-red"},"订阅已过期"):null!=j&&j.tryApply?s.a.createElement("span",{className:"state-blue"},"试用中"):s.a.createElement("span",{className:"state-blue"},"订阅中")};return s.a.createElement(n.a,{spinning:J,tip:"导入licence中..."},s.a.createElement(r.default,{className:"thoughtware_version"},s.a.createElement(l.default,{xs:{span:24},sm:{span:"13",offset:"5"}},s.a.createElement("div",{className:"thoughtware_version_container"},s.a.createElement(f.a,{firstItem:"版本与许可证"},s.a.createElement("div",{className:"thoughtware_version_up_btn"},2===(null==C?void 0:C.release)&&s.a.createElement(s.a.Fragment,null,s.a.createElement(i.a,y({},K,{fileList:_}),s.a.createElement(d.a,{isMar:!C.expired,type:"primary"},"导入licence")),!C.expired&&s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,{onClick:function(){return L(!0)}},"历史"),s.a.createElement(p.a,{visible:H,footer:null,onCancel:function(){return L(!1)},destroyOnClose:!0,width:800,title:s.a.createElement("div",{className:"info-item-title-te-modal-title"},s.a.createElement("div",null,"更多详情"),s.a.createElement("div",{onClick:function(){return L(!1)}},s.a.createElement(u.default,null)))},s.a.createElement("div",{className:"info-item-title-te-modal-info info-item-title-te-modal"},s.a.createElement("div",{className:"te-modal-info-item"},s.a.createElement("div",null,"生效时间"),s.a.createElement("div",null,"过期时间"),s.a.createElement("div",null,"用户数"),s.a.createElement("div",null,"状态")),w&&w.length>0?w.map((function(e,t){return s.a.createElement("div",{key:t,className:"te-modal-info-item"},s.a.createElement("div",null,h()(e.expiryTime).format("YYYY-MM-DD HH:mm:ss")),s.a.createElement("div",null,h()(e.issuedTime).format("YYYY-MM-DD HH:mm:ss")),s.a.createElement("div",null,e.userNum>0?e.userNum:"无限制"),s.a.createElement("div",null,1===e.state&&"已失效",2===e.state&&s.a.createElement("span",{className:"te-modal-info-item-blue"},"生效中"),3===e.state&&"未生效"))})):s.a.createElement("div",{className:"te-modal-info-item-empty"},"暂无历史"))))))),s.a.createElement("div",{className:"thoughtware_version-info"},s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("span",{className:"info-item-title"},"应用名称"),v.b[a]),s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("span",{className:"info-item-title"},"版本类型"),1===(null==C?void 0:C.release)?"社区版":"企业版","（",s.a.createElement("span",{className:"info-item-title-te",onClick:function(){return T(!0)}},"企业版特性"),"）",s.a.createElement(p.a,{visible:M,footer:null,onCancel:function(){return T(!1)},destroyOnClose:!0,width:800,title:s.a.createElement("div",{className:"info-item-title-te-modal-title"},s.a.createElement("div",null,"企业版特性"),s.a.createElement("div",{onClick:function(){return T(!1)}},s.a.createElement(u.default,null)))},s.a.createElement("div",{className:"info-item-title-te-modal"},E))),1===C.release?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("span",{className:"info-item-title"},"用户数"),"无限制"),s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("span",{className:"info-item-title"},"升级企业版"),s.a.createElement("span",{className:"info-item-title-te",onClick:$},"升级"))):C.expired?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("span",{className:"info-item-title"},"用户数"),"无限制"),s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("span",{className:"info-item-title"},"版本状态"),"未订阅 （",s.a.createElement("span",{className:"info-item-title-te info-item-title-try",onClick:q},"免费试用"),s.a.createElement("span",{className:"info-item-title-te",onClick:z},"订阅"),"）")):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("span",{className:"info-item-title"},"版本状态"),B()),s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("span",{className:"info-item-title"},"用户数"),(null==j?void 0:j.userNum)>0?j.userNum+"人":"无限制")),s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("span",{className:"info-item-title"},"生效时间"),null!=j&&j.expiryTime?h()(null==j?void 0:j.expiryTime).format("YYYY-MM-DD HH:mm:ss"):"--"),s.a.createElement("div",{className:"thoughtware_version-info-item"},s.a.createElement("span",{className:"info-item-title"},"过期时间"),null!=j&&j.issuedTime?h()(null==j?void 0:j.issuedTime).format("YYYY-MM-DD HH:mm:ss"):"--"))))))},S=(a(390),a(389)),j=a(230);function k(){return(k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var A=function(e){var t=function(e){return e?s.a.createElement(j.a,{style:{color:"#0063FF"}}):s.a.createElement(u.default,{style:{color:"#ff0000"}})},a=[{title:"功能",dataIndex:"title",key:"title",colSpan:2,render:function(e,t,a){var n={children:e,props:{}};return 0===a&&(n.props.rowSpan=3),a>0&&a<3&&(n.props.rowSpan=0),3===a&&(n.props.rowSpan=2),a>3&&(n.props.rowSpan=0),n}},{title:"功能",dataIndex:"feature",key:"feature",colSpan:0},{title:"社区版",dataIndex:"ce",key:"ce",render:function(e){return t(e)}},{title:"企业版",dataIndex:"ee",key:"ee",render:function(e){return t(e)}}];return s.a.createElement(O,k({},e,{bgroup:"xpack"}),s.a.createElement(S.default,{bordered:!0,columns:a,dataSource:[{key:"1",title:"基本功能",feature:"LDAP",ce:!1,ee:!0},{key:"2",title:"基本功能",feature:"在线客服",ce:!1,ee:!0},{key:"3",title:"基本功能",feature:"用户和部门",ce:!0,ee:!0},{key:"4",title:"升级功能",feature:"插件",ce:!1,ee:!0},{key:"5",title:"升级功能",feature:"权限",ce:!0,ee:!0}],pagination:!1}))}}}]);